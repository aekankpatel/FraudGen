{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bhumiti\\\\Desktop\\\\BIA662\\\\Fraudgen\\\\fraudgen-client\\\\src\\\\components\\\\LocationMap.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LocationMap({\n  transactions\n}) {\n  _s();\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [leafletMap, setLeafletMap] = useState(null);\n  const [markers, setMarkers] = useState([]);\n  const mapContainerStyles = {\n    height: '400px',\n    width: '100%',\n    borderRadius: '8px',\n    overflow: 'hidden'\n  };\n  useEffect(() => {\n    // Only run this once to set up the map\n    if (!mapLoaded) {\n      // Dynamically load Leaflet CSS\n      const linkElement = document.createElement('link');\n      linkElement.rel = 'stylesheet';\n      linkElement.href = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.css';\n      document.head.appendChild(linkElement);\n\n      // Dynamically load Leaflet JS\n      const script = document.createElement('script');\n      script.src = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.js';\n      script.integrity = 'sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==';\n      script.crossOrigin = '';\n      script.onload = () => {\n        // Initialize map after Leaflet is loaded\n        const L = window.L;\n\n        // Create map instance\n        const map = L.map('map').setView([40.7282, -74.0776], 2);\n\n        // Add tile layer\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n          attribution: '© OpenStreetMap contributors'\n        }).addTo(map);\n        setLeafletMap(map);\n        setMapLoaded(true);\n      };\n      document.body.appendChild(script);\n\n      // Cleanup on component unmount\n      return () => {\n        document.head.removeChild(linkElement);\n        document.body.removeChild(script);\n        if (leafletMap) {\n          leafletMap.remove();\n        }\n      };\n    }\n  }, [mapLoaded]);\n\n  // Update markers when transactions change\n  useEffect(() => {\n    if (mapLoaded && leafletMap && transactions) {\n      // Remove existing markers\n      markers.forEach(marker => leafletMap.removeLayer(marker));\n\n      // Create new markers\n      const newMarkers = [];\n      transactions.forEach(tx => {\n        if (tx.location_data && tx.location_data.latitude && tx.location_data.longitude) {\n          try {\n            // Determine marker color based on transaction risk\n            const markerColor = tx.prediction && tx.prediction.includes('FRAUD') ? 'red' : tx.prediction && tx.prediction.includes('HIGH_RISK') ? 'orange' : tx.prediction && tx.prediction.includes('NEEDS_REVIEW') ? 'yellow' : 'green';\n\n            // Create custom marker icon\n            const markerIcon = window.L.divIcon({\n              className: 'custom-marker',\n              html: `<div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${markerColor}; border: 2px solid white;\"></div>`,\n              iconSize: [20, 20],\n              iconAnchor: [10, 10]\n            });\n\n            // Create marker\n            const marker = window.L.marker([parseFloat(tx.location_data.latitude), parseFloat(tx.location_data.longitude)], {\n              icon: markerIcon\n            }).addTo(leafletMap);\n\n            // Add popup with transaction details\n            marker.bindPopup(`\n              <div style=\"min-width: 200px;\">\n                <h3 style=\"margin: 0 0 5px 0;\">${tx.prediction || 'Unknown'}</h3>\n                <p style=\"margin: 0 0 3px 0;\"><strong>Amount:</strong> $${tx.transaction_data.amount.toLocaleString()}</p>\n                <p style=\"margin: 0 0 3px 0;\"><strong>Type:</strong> ${tx.transaction_data.type}</p>\n                <p style=\"margin: 0 0 3px 0;\"><strong>Location:</strong> ${tx.location_data.city || 'Unknown'}, ${tx.location_data.region || 'Unknown'}, ${tx.location_data.country || 'Unknown'}</p>\n                ${tx.location_data.is_vpn || tx.location_data.is_proxy ? '<p style=\"margin: 0; color: #e74c3c;\"><strong>VPN/Proxy detected</strong></p>' : ''}\n              </div>\n            `);\n            newMarkers.push(marker);\n          } catch (err) {\n            console.error(\"Error creating marker:\", err);\n          }\n        }\n      });\n      setMarkers(newMarkers);\n\n      // Adjust map view to fit markers if there are any\n      if (newMarkers.length > 0) {\n        const group = new window.L.featureGroup(newMarkers);\n        leafletMap.fitBounds(group.getBounds(), {\n          padding: [50, 50]\n        });\n      }\n    }\n  }, [mapLoaded, leafletMap, transactions]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    style: mapContainerStyles\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n_s(LocationMap, \"tL+lau01MvWTiJSAH2w2a+IAdAY=\");\n_c = LocationMap;\nexport default LocationMap;\nvar _c;\n$RefreshReg$(_c, \"LocationMap\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","LocationMap","transactions","_s","mapLoaded","setMapLoaded","leafletMap","setLeafletMap","markers","setMarkers","mapContainerStyles","height","width","borderRadius","overflow","linkElement","document","createElement","rel","href","head","appendChild","script","src","integrity","crossOrigin","onload","L","window","map","setView","tileLayer","attribution","addTo","body","removeChild","remove","forEach","marker","removeLayer","newMarkers","tx","location_data","latitude","longitude","markerColor","prediction","includes","markerIcon","divIcon","className","html","iconSize","iconAnchor","parseFloat","icon","bindPopup","transaction_data","amount","toLocaleString","type","city","region","country","is_vpn","is_proxy","push","err","console","error","length","group","featureGroup","fitBounds","getBounds","padding","id","style","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Bhumiti/Desktop/BIA662/Fraudgen/fraudgen-client/src/components/LocationMap.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nfunction LocationMap({ transactions }) {\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [leafletMap, setLeafletMap] = useState(null);\r\n  const [markers, setMarkers] = useState([]);\r\n\r\n  const mapContainerStyles = {\r\n    height: '400px',\r\n    width: '100%',\r\n    borderRadius: '8px',\r\n    overflow: 'hidden'\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Only run this once to set up the map\r\n    if (!mapLoaded) {\r\n      // Dynamically load Leaflet CSS\r\n      const linkElement = document.createElement('link');\r\n      linkElement.rel = 'stylesheet';\r\n      linkElement.href = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.css';\r\n      document.head.appendChild(linkElement);\r\n\r\n      // Dynamically load Leaflet JS\r\n      const script = document.createElement('script');\r\n      script.src = 'https://unpkg.com/leaflet@1.7.1/dist/leaflet.js';\r\n      script.integrity = 'sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==';\r\n      script.crossOrigin = '';\r\n      \r\n      script.onload = () => {\r\n        // Initialize map after Leaflet is loaded\r\n        const L = window.L;\r\n        \r\n        // Create map instance\r\n        const map = L.map('map').setView([40.7282, -74.0776], 2);\r\n        \r\n        // Add tile layer\r\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n          attribution: '© OpenStreetMap contributors'\r\n        }).addTo(map);\r\n        \r\n        setLeafletMap(map);\r\n        setMapLoaded(true);\r\n      };\r\n      \r\n      document.body.appendChild(script);\r\n      \r\n      // Cleanup on component unmount\r\n      return () => {\r\n        document.head.removeChild(linkElement);\r\n        document.body.removeChild(script);\r\n        if (leafletMap) {\r\n          leafletMap.remove();\r\n        }\r\n      };\r\n    }\r\n  }, [mapLoaded]);\r\n  \r\n  // Update markers when transactions change\r\n  useEffect(() => {\r\n    if (mapLoaded && leafletMap && transactions) {\r\n      // Remove existing markers\r\n      markers.forEach(marker => leafletMap.removeLayer(marker));\r\n      \r\n      // Create new markers\r\n      const newMarkers = [];\r\n      \r\n      transactions.forEach(tx => {\r\n        if (tx.location_data && tx.location_data.latitude && tx.location_data.longitude) {\r\n          try {\r\n            // Determine marker color based on transaction risk\r\n            const markerColor = tx.prediction && tx.prediction.includes('FRAUD') ? 'red' : \r\n                              tx.prediction && tx.prediction.includes('HIGH_RISK') ? 'orange' : \r\n                              tx.prediction && tx.prediction.includes('NEEDS_REVIEW') ? 'yellow' : \r\n                              'green';\r\n            \r\n            // Create custom marker icon\r\n            const markerIcon = window.L.divIcon({\r\n              className: 'custom-marker',\r\n              html: `<div style=\"width: 16px; height: 16px; border-radius: 50%; background-color: ${markerColor}; border: 2px solid white;\"></div>`,\r\n              iconSize: [20, 20],\r\n              iconAnchor: [10, 10]\r\n            });\r\n            \r\n            // Create marker\r\n            const marker = window.L.marker(\r\n              [parseFloat(tx.location_data.latitude), parseFloat(tx.location_data.longitude)], \r\n              { icon: markerIcon }\r\n            ).addTo(leafletMap);\r\n            \r\n            // Add popup with transaction details\r\n            marker.bindPopup(`\r\n              <div style=\"min-width: 200px;\">\r\n                <h3 style=\"margin: 0 0 5px 0;\">${tx.prediction || 'Unknown'}</h3>\r\n                <p style=\"margin: 0 0 3px 0;\"><strong>Amount:</strong> $${tx.transaction_data.amount.toLocaleString()}</p>\r\n                <p style=\"margin: 0 0 3px 0;\"><strong>Type:</strong> ${tx.transaction_data.type}</p>\r\n                <p style=\"margin: 0 0 3px 0;\"><strong>Location:</strong> ${tx.location_data.city || 'Unknown'}, ${tx.location_data.region || 'Unknown'}, ${tx.location_data.country || 'Unknown'}</p>\r\n                ${tx.location_data.is_vpn || tx.location_data.is_proxy ? \r\n                  '<p style=\"margin: 0; color: #e74c3c;\"><strong>VPN/Proxy detected</strong></p>' : ''}\r\n              </div>\r\n            `);\r\n            \r\n            newMarkers.push(marker);\r\n          } catch (err) {\r\n            console.error(\"Error creating marker:\", err);\r\n          }\r\n        }\r\n      });\r\n      \r\n      setMarkers(newMarkers);\r\n      \r\n      // Adjust map view to fit markers if there are any\r\n      if (newMarkers.length > 0) {\r\n        const group = new window.L.featureGroup(newMarkers);\r\n        leafletMap.fitBounds(group.getBounds(), { padding: [50, 50] });\r\n      }\r\n    }\r\n  }, [mapLoaded, leafletMap, transactions]);\r\n\r\n  return (\r\n    <div id=\"map\" style={mapContainerStyles}></div>\r\n  );\r\n}\r\n\r\nexport default LocationMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}